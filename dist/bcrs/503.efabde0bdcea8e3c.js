"use strict";(self.webpackChunkbcrs=self.webpackChunkbcrs||[]).push([[503],{1503:(ne,g,u)=>{u.r(g),u.d(g,{SecurityModule:()=>te});var m=u(6814),i=u(95),l=u(9310),p=u(9862),e=u(4946);let f=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-security"]],decls:1,vars:0,template:function(o,n){1&o&&e._UZ(0,"router-outlet")},dependencies:[l.lC],encapsulation:2}),s})();var _=u(459);let d=(()=>{var t;class s{constructor(o){this.http=o}getUserByEmpId(o){return this.http.get("/api/users/"+o)}signIn(o,n){return this.http.post("/api/security/signIn",{email:o,password:n})}registerUser(o){return this.http.post("/api/security/register",{user:o})}verifyUser(o){return this.http.post("/api/security/verify/users/"+o,{email:o})}findsecurityQuestions(o){return this.http.post(`/api/users/${o}/security-questions`,{})}verifysecurityQuestions(o,n){return this.http.post(`/api/security/verify/users/${o}/security-questions`,{securityQuestions:n})}resetPassword(o,n){return this.http.post(`/api/security/users/${o}/reset-password`,n)}}return(t=s).\u0275fac=function(o){return new(o||t)(e.LFG(p.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();function h(t,s){if(1&t&&(e.TgZ(0,"div",23)(1,"strong"),e._uU(2),e.qZA()()),2&t){const r=e.oxw();e.xp6(2),e.Oqu(r.errorMessage)}}function v(t,s){1&t&&(e.TgZ(0,"div")(1,"div",24)(2,"strong"),e._uU(3,"Email is Required!"),e.qZA(),e._UZ(4,"button",25),e.qZA()())}function b(t,s){1&t&&(e.TgZ(0,"div")(1,"div",26)(2,"strong"),e._uU(3,"Please enter a valid email!"),e.qZA(),e._UZ(4,"button",25),e.qZA()())}function y(t,s){1&t&&(e.TgZ(0,"div")(1,"div",26)(2,"strong"),e._uU(3,"Please enter a valid email!"),e.qZA(),e._UZ(4,"button",25),e.qZA()())}function q(t,s){1&t&&(e.TgZ(0,"div",9)(1,"div",10),e._UZ(2,"div",11),e.TgZ(3,"div",12),e._uU(4,"Personal Information"),e.qZA()(),e.TgZ(5,"div",13),e._UZ(6,"div",11)(7,"div",12),e.qZA(),e.TgZ(8,"div",13),e._UZ(9,"div",11)(10,"div",12),e.qZA()())}function x(t,s){1&t&&(e.TgZ(0,"div",9)(1,"div",14),e._UZ(2,"div",11)(3,"div",12),e.qZA(),e.TgZ(4,"div",10),e._UZ(5,"div",11),e.TgZ(6,"div",12),e._uU(7,"User Credentials"),e.qZA()(),e.TgZ(8,"div",13),e._UZ(9,"div",11)(10,"div",12),e.qZA()())}function T(t,s){1&t&&(e.TgZ(0,"div",15)(1,"div",14),e._UZ(2,"div",11)(3,"div",12),e.qZA(),e.TgZ(4,"div",14),e._UZ(5,"div",11)(6,"div",12),e.qZA(),e.TgZ(7,"div",10),e._UZ(8,"div",11),e.TgZ(9,"div",12),e._uU(10,"Security Questions"),e.qZA()()())}function C(t,s){if(1&t&&(e.TgZ(0,"div")(1,"div",16),e._uU(2),e.qZA()()),2&t){const r=e.oxw();e.xp6(2),e.hij(" ",r.errorMessage," ")}}function A(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"div")(1,"div",17)(2,"div",18)(3,"label",19),e._uU(4,"First Name:"),e.qZA(),e._UZ(5,"input",20),e.qZA(),e.TgZ(6,"div",18)(7,"label",21),e._uU(8,"Last Name:"),e.qZA(),e._UZ(9,"input",22),e.qZA()(),e.TgZ(10,"div",17)(11,"div",18)(12,"label",23),e._uU(13,"Address:"),e.qZA(),e._UZ(14,"input",24),e.qZA(),e.TgZ(15,"div",18)(16,"label",25),e._uU(17,"Phone Number:"),e.qZA(),e._UZ(18,"input",26),e.qZA()(),e.TgZ(19,"div",27)(20,"button",28),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.next("credentials"))}),e._uU(21,"Next"),e.qZA()()()}}function I(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"div")(1,"div",17)(2,"div",18)(3,"label",29),e._uU(4,"Email:"),e.qZA(),e._UZ(5,"input",30),e.qZA(),e.TgZ(6,"div",18)(7,"label",31),e._uU(8,"Password:"),e.qZA(),e._UZ(9,"input",32),e.qZA()(),e.TgZ(10,"div",17)(11,"div",33)(12,"label",34),e._uU(13,"Confirm Password:"),e.qZA(),e._UZ(14,"input",35),e.qZA()(),e.TgZ(15,"div",36)(16,"button",37),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.next("personalInfo"))}),e._uU(17,"Back"),e.qZA(),e.TgZ(18,"button",38),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.next("securityQuestions"))}),e._uU(19,"Next"),e.qZA()()()}}function U(t,s){if(1&t&&(e.TgZ(0,"option",57),e._uU(1),e.qZA()),2&t){const r=s.$implicit;e.Q6J("value",r),e.xp6(1),e.Oqu(r)}}function k(t,s){if(1&t&&(e.TgZ(0,"option",57),e._uU(1),e.qZA()),2&t){const r=s.$implicit;e.Q6J("value",r),e.xp6(1),e.Oqu(r)}}function M(t,s){if(1&t&&(e.TgZ(0,"option",57),e._uU(1),e.qZA()),2&t){const r=s.$implicit;e.Q6J("value",r),e.xp6(1),e.Oqu(r)}}function P(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"div")(1,"h2"),e._uU(2," Please select and answer security questions below."),e.qZA(),e.TgZ(3,"div",39)(4,"div",40)(5,"div",41)(6,"label",42),e._uU(7,"Security Question #1:"),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"select",43),e.YNc(10,U,2,2,"option",44),e.qZA()()(),e.TgZ(11,"div",40)(12,"div",33)(13,"label",45),e._uU(14,"Answer:"),e.qZA(),e._UZ(15,"input",46),e.qZA()(),e.TgZ(16,"div",40)(17,"div",41)(18,"label",47),e._uU(19,"Security Question #2:"),e.qZA(),e._UZ(20,"br"),e.TgZ(21,"select",48),e.YNc(22,k,2,2,"option",44),e.qZA()()(),e.TgZ(23,"div",40)(24,"div",33)(25,"label",49),e._uU(26,"Answer:"),e.qZA(),e._UZ(27,"input",50),e.qZA()(),e.TgZ(28,"div",40)(29,"div",41)(30,"label",51),e._uU(31,"Security Question #3:"),e.qZA(),e._UZ(32,"br"),e.TgZ(33,"select",52),e.YNc(34,M,2,2,"option",44),e.qZA()()(),e.TgZ(35,"div",40)(36,"div",33)(37,"label",53),e._uU(38,"Answer:"),e.qZA(),e._UZ(39,"input",54),e.qZA()()(),e.TgZ(40,"div",36)(41,"button",55),e.NdJ("click",function(){e.CHM(r);const n=e.oxw();return e.KtG(n.next("credentials"))}),e._uU(42,"Back"),e.qZA(),e.TgZ(43,"button",56),e._uU(44,"SUBMIT"),e.qZA()()()}if(2&t){const r=e.oxw();e.xp6(10),e.Q6J("ngForOf",r.qArr1),e.xp6(12),e.Q6J("ngForOf",r.qArr2),e.xp6(12),e.Q6J("ngForOf",r.qArr3)}}function N(t,s){if(1&t&&(e.TgZ(0,"div")(1,"div",11),e._uU(2),e.qZA()()),2&t){const r=e.oxw();e.xp6(2),e.hij(" ",r.errorMessage," ")}}function F(t,s){if(1&t&&(e.TgZ(0,"div",20)(1,"div",21)(2,"div",22),e._uU(3),e.qZA()()()),2&t){const r=e.oxw();e.xp6(3),e.hij(" ",r.errorMessage," ")}}function Q(t,s){1&t&&(e.TgZ(0,"div",23)(1,"span",24),e._uU(2,"Loading..."),e.qZA()())}function J(t,s){if(1&t&&(e.TgZ(0,"label",25),e._uU(1),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Oqu(r.question1)}}function L(t,s){1&t&&(e.TgZ(0,"div"),e._uU(1," Answer is required. "),e.qZA())}function Y(t,s){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,L,2,0,"div",18),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.sqForm.controls.answer1.hasError("required"))}}function R(t,s){1&t&&(e.TgZ(0,"div",23)(1,"span",24),e._uU(2,"Loading..."),e.qZA()())}function z(t,s){if(1&t&&(e.TgZ(0,"label",27),e._uU(1),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Oqu(r.question2)}}function E(t,s){1&t&&(e.TgZ(0,"div"),e._uU(1," Answer is required. "),e.qZA())}function V(t,s){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,E,2,0,"div",18),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.sqForm.controls.answer2.hasError("required"))}}function j(t,s){1&t&&(e.TgZ(0,"div",23)(1,"span",24),e._uU(2,"Loading..."),e.qZA()())}function $(t,s){if(1&t&&(e.TgZ(0,"label",28),e._uU(1),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Oqu(r.question3)}}function G(t,s){1&t&&(e.TgZ(0,"div"),e._uU(1," Answer is required. "),e.qZA())}function B(t,s){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,G,2,0,"div",18),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.sqForm.controls.answer3.hasError("required"))}}function H(t,s){1&t&&(e.TgZ(0,"span"),e._uU(1,"Verify Security Questions"),e.qZA())}function X(t,s){1&t&&(e.TgZ(0,"div"),e._UZ(1,"span",29),e._uU(2," Loading... "),e.qZA())}function W(t,s){if(1&t&&(e.TgZ(0,"div")(1,"div",13),e._uU(2),e.qZA()()),2&t){const r=e.oxw();e.xp6(2),e.hij(" ",r.errorMessage," ")}}const D=[{path:"",component:f,children:[{path:"signin",component:(()=>{var t;class s{constructor(o,n,a,c,oe){this.route=o,this.router=n,this.cookieService=a,this.securityService=c,this.fb=oe,this.isLoading=!1,this.signInForm=this.fb.group({email:[null,i.kI.compose([i.kI.required,i.kI.email])],password:[null,i.kI.compose([i.kI.required,i.kI.pattern("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$")])]}),this.sessionUser={},this.errorMessage=""}signIn(){this.isLoading=!0,console.log("SigninForm:",this.signInForm.value);let o=this.signInForm.controls.email.value,n=this.signInForm.controls.password.value;if(!o||!n)return this.errorMessage="Please enter an email and password in the fields below!",this.isLoading=!1,void this.hideAlert();this.securityService.signIn(o,n).subscribe({next:a=>{console.log("user",a),this.sessionUser=a,this.cookieService.set("session_user",JSON.stringify(this.sessionUser),1),this.cookieService.set("session_name",`${a.firstName} ${a.lastName}`,1),this.cookieService.set("session_role",`${a.role}`,1),this.cookieService.set("session_userId",`${a._id}`,1);const c=this.route.snapshot.queryParamMap.get("returnUrl")||"/";this.isLoading=!1,this.router.navigate([c])},error:a=>{if(this.isLoading=!1,a.error.message)return this.errorMessage=a.error.message,(a.error.message="Valid email and/or password not found")&&(this.errorMessage="Invalid email and/or password! Please try again!"),console.log("err",a),void this.hideAlert()}})}hideAlert(){setTimeout(()=>{this.errorMessage=""},5e3)}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(_.N),e.Y36(d),e.Y36(i.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-signin"]],decls:34,vars:5,consts:[[1,"container-fluid","pt-5"],[1,"row","justify-content-center"],[1,"signin-container","col-lg-6","col-md-10","col-sm-12"],[1,"card"],[1,"card-title","pt-5","text-align"],["class","alert alert-danger mx-auto text-align","role","alert",4,"ngIf"],[1,"m-5"],[3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"row","d-grid","form-content"],[1,"col-12","my-3","w-75","text"],["for","email"],["id","email","type","text","formControlName","email",1,"form-control"],[1,"col-12","my-3","w-75"],["for","password"],["id","password","type","password","formControlName","password",1,"form-control"],[1,"row","w-50","text-align","mx-auto","pt-3"],["id","submit",1,"btn","button-lg","button-signin"],[1,"register"],["routerLink","/security/registration"],[1,"forgot"],["routerLink","/security/forgot-password"],["routerLink","/",1,"return-btn"],["role","alert",1,"alert","alert-danger","mx-auto","text-align"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show","w-50","mx-auto","text-align"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn","btn-close"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show","text-align","mx-auto","w-50"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),e._uU(6,"Employee Sign-In "),e.qZA()(),e.YNc(7,h,3,1,"div",5),e.TgZ(8,"div",6)(9,"form",7),e.NdJ("ngSubmit",function(){return n.signIn()}),e.TgZ(10,"fieldset"),e.YNc(11,v,5,0,"div",8),e.YNc(12,b,5,0,"div",8),e.TgZ(13,"div",9)(14,"div",10)(15,"label",11),e._uU(16,"Email"),e.qZA(),e._UZ(17,"input",12),e.qZA(),e.YNc(18,y,5,0,"div",8),e.TgZ(19,"div",13)(20,"label",14),e._uU(21,"Password"),e.qZA(),e._UZ(22,"input",15),e.qZA()()(),e.TgZ(23,"div",16)(24,"button",17),e._uU(25,"Sign In"),e.qZA()()(),e.TgZ(26,"div",18)(27,"a",19),e._uU(28,"New user? Register here!"),e.qZA()(),e.TgZ(29,"div",20)(30,"a",21),e._uU(31,"Forgot password?"),e.qZA()()()(),e.TgZ(32,"a",22),e._uU(33,"Return"),e.qZA()()()()),2&o&&(e.xp6(7),e.Q6J("ngIf",n.errorMessage),e.xp6(2),e.Q6J("formGroup",n.signInForm),e.xp6(2),e.Q6J("ngIf",n.signInForm.controls.email.touched&&n.signInForm.controls.email.hasError("required")),e.xp6(1),e.Q6J("ngIf",n.signInForm.controls.email.touched&&n.signInForm.controls.email.hasError("email")),e.xp6(6),e.Q6J("ngIf",n.signInForm.controls.password.touched&&n.signInForm.controls.password.hasError("email")))},dependencies:[m.O5,l.rH,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#403f3c}.signin-container[_ngcontent-%COMP%]{margin:5%;min-height:80vb}.card[_ngcontent-%COMP%]{color:#fff;background-color:#7f7e7d}h2[_ngcontent-%COMP%]{font-size:50px;text-align:center;padding-top:50px;font-weight:600;color:#fff09a;margin-bottom:4%}.col-12[_ngcontent-%COMP%]{margin-left:12%}.button-signin[_ngcontent-%COMP%]{font-weight:600;font-size:30px;background-color:#eeba35;font-family:Teko,sans-serif;margin-top:4%;margin-bottom:6%}.forgot[_ngcontent-%COMP%]{text-align:right;margin-top:-3.5%}a[_ngcontent-%COMP%]{color:#fff}"]}),s})(),title:"BCRS: Sign In"},{path:"not-found",component:(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-not-found"]],decls:8,vars:0,consts:[[1,"container-fluid"],[1,"card","bg-transparent","pt-5","pb-5"],[1,"card-title","text-align"],["src","./assets/not-found-bcrs.png",1,"img-fluid",2,"width","800px"],[1,"card-content","text-align"],["routerLink","/",1,"btn","button-home","btn-lg"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"div",4)(6,"button",5),e._uU(7,"Return home"),e.qZA()()()())},dependencies:[l.rH],styles:[".button-home[_ngcontent-%COMP%]{font-weight:600;font-size:30px;background-color:#eeba35;font-family:Teko,sans-serif}.container-fluid[_ngcontent-%COMP%]{background-color:#403f3c;min-height:100vh}.text-align[_ngcontent-%COMP%]{text-align:center}.card[_ngcontent-%COMP%]{border:none}"]}),s})(),title:"404 Error"},{path:"registration",component:(()=>{var t;class s{next(o){this.step=o}constructor(o,n,a){this.securityService=o,this.router=n,this.fb=a,this.step="personalInfo",this.isLoading=!1,this.registrationForm=this.fb.group({firstName:[null,i.kI.compose([i.kI.required])],lastName:[null,i.kI.compose([i.kI.required])],email:[null,i.kI.compose([i.kI.required,i.kI.email])],password:[null,i.kI.compose([i.kI.required,i.kI.pattern("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$")])],address:[null,i.kI.compose([i.kI.required])],phoneNumber:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],confirmPassword:[null,i.kI.compose([i.kI.required,i.kI.pattern("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$")])],questionOne:[null,i.kI.compose([i.kI.required])],questionTwo:[null,i.kI.compose([i.kI.required])],questionThree:[null,i.kI.compose([i.kI.required])],answerOne:[null,i.kI.compose([i.kI.required])],answerTwo:[null,i.kI.compose([i.kI.required])],answerThree:[null,i.kI.compose([i.kI.required])]}),this.securityQuestions=["What is your mother's maiden name?","What is the name of your first pet?","What is the make and model of your first car?","In what city were you born?","What was the name of your elementary school?"],this.qArr1=this.securityQuestions,this.qArr2=[],this.qArr3=[],this.errorMessage=""}ngOnInit(){this.registrationForm.get("questionOne")?.valueChanges.subscribe(o=>{console.log("Value changed from question 1",o),this.qArr2=this.qArr1.filter(n=>n!==o),console.log(this.qArr2)}),this.registrationForm.get("questionTwo")?.valueChanges.subscribe(o=>{console.log("Value changed from question 2",o),this.qArr3=this.qArr2.filter(n=>n!==o),console.log(this.qArr3)})}register(){if(this.isLoading=!0,console.log("Registration Form:",this.registrationForm.value),null==this.registrationForm.controls.questionOne.value||null==this.registrationForm.controls.questionTwo.value||null==this.registrationForm.controls.questionThree.value)return this.errorMessage="Please select three security questions",this.isLoading=!1,void this.hideAlert();const a={empId:1111,email:this.registrationForm.controls.email.value,password:this.registrationForm.controls.password.value,firstName:this.registrationForm.controls.firstName.value,lastName:this.registrationForm.controls.lastName.value,phoneNumber:this.registrationForm.controls.phoneNumber.value,address:this.registrationForm.controls.address.value,selectedSecurityQuestions:[{questionText:this.registrationForm.controls.questionOne.value,answerText:this.registrationForm.controls.answerOne.value},{questionText:this.registrationForm.controls.questionTwo.value,answerText:this.registrationForm.controls.answerTwo.value},{questionText:this.registrationForm.controls.questionThree.value,answerText:this.registrationForm.controls.answerThree.value}],role:"employee",isDisabled:!1};return a.email&&a.password&&a.firstName&&a.phoneNumber&&a.phoneNumber&&a.address?a.password!==this.registrationForm.controls.confirmPassword.value?(this.errorMessage="Passwords do not match, please try again",this.isLoading=!1,void this.hideAlert()):(console.log(a),void this.securityService.registerUser(a).subscribe({next:c=>{console.log(c),this.router.navigate(["/security/signin"]),this.isLoading=!1},error:c=>{console.log("error",c),this.errorMessage=c.message,this.isLoading=!1}})):(this.errorMessage="Please fill out all form fields before submitting",this.isLoading=!1,void this.hideAlert())}hideAlert(){setTimeout(()=>{this.errorMessage=""},5e3)}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(d),e.Y36(l.F0),e.Y36(i.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-registration"]],decls:19,vars:8,consts:[[1,"config-container","pt-5","pb-5"],[1,"row","justify-content-center","mt-5","text-center"],[1,"row"],["class","stepper-wrapper mx-auto pb-5 pt-3",4,"ngIf"],["class","stepper-wrapper row mx-auto",4,"ngIf"],[1,"card","col-lg-6","col-md-10","col-sm-11"],[1,"row","justify-content-center",3,"formGroup","ngSubmit"],[4,"ngIf"],["routerLink","/security/signin",1,"nav-link"],[1,"stepper-wrapper","mx-auto","pb-5","pt-3"],[1,"stepper-item","done"],[1,"step-counter"],[1,"step-name"],[1,"stepper-item"],[1,"stepper-item","completed"],[1,"stepper-wrapper","row","mx-auto"],["role","alert",1,"alert","alert-danger","font"],[1,"row","justify-content-center"],[1,"col-lg-4"],["for","firstName"],["id","firstName","type","text","formControlName","firstName",1,"form-control"],["for","lastName"],["id","lastName","type","text","formControlName","lastName",1,"form-control"],["for","address"],["id","address","type","text","formControlName","address",1,"form-control"],["for","phoneNumber"],["id","phoneNumber","type","text","formControlName","phoneNumber",1,"form-control"],[1,"row","justify-content-center","w-50","text-align","mx-auto","pt-3"],[1,"btn","btn-lg","mx-auto","button-register",3,"click"],["for","email"],["id","email","type","text","formControlName","email",1,"form-control"],["for","password"],["id","password","type","password","formControlName","password",1,"form-control"],[1,"col-lg-5"],["for","confirmPassword"],["id","confirmPassword","type","password","formControlName","confirmPassword",1,"form-control"],[1,"row","column-gap-3","justify-content-center","w-50","text-align","mx-auto","pt-3"],[1,"col","btn","btn-dark","mx-auto","button-back","w-25",3,"click"],[1,"btn","btn-lg","mx-auto","button-register","w-50",3,"click"],[1,"center-form","row","pb-3"],[1,"row","justify-content-left"],[1,"col-lg-7"],["for","questionOne"],["id","questionOne","name","questionOne","formControlName","questionOne"],[3,"value",4,"ngFor","ngForOf"],["for","answerOne",1,"answer-label"],["id","answerOne","type","text","formControlName","answerOne",1,"form-control","answer-input"],["for","questionTwo"],["id","questionTwo","name","questionTwo","formControlName","questionTwo"],["for","answerTwo",1,"answer-label"],["id","answerTwo","type","text","formControlName","answerTwo",1,"form-control","answer-input"],["for","questionThree"],["id","questionThree","name","questionThree","formControlName","questionThree"],["for","answerThree"],["id","answerThree","type","text","formControlName","answerThree",1,"form-control","answer-input"],[1,"col","btn","btn-dark","mx-auto","w-25","button-back",3,"click"],["id","submit","value","submit",1,"col","btn","button-register","w-50"],[3,"value"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3,"Register New Employee"),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,q,11,0,"div",3),e.YNc(6,x,11,0,"div",3),e.qZA(),e.YNc(7,T,11,0,"div",4),e._UZ(8,"br")(9,"div",2)(10,"br"),e.TgZ(11,"div",5)(12,"form",6),e.NdJ("ngSubmit",function(){return n.register()}),e.YNc(13,C,3,1,"div",7),e.YNc(14,A,22,0,"div",7),e.YNc(15,I,20,0,"div",7),e.YNc(16,P,45,3,"div",7),e.qZA()(),e.TgZ(17,"a",8),e._uU(18,"Return"),e.qZA()()()),2&o&&(e.xp6(5),e.Q6J("ngIf","personalInfo"===n.step),e.xp6(1),e.Q6J("ngIf","credentials"===n.step),e.xp6(1),e.Q6J("ngIf","securityQuestions"===n.step),e.xp6(5),e.Q6J("formGroup",n.registrationForm),e.xp6(1),e.Q6J("ngIf",n.errorMessage),e.xp6(1),e.Q6J("ngIf","personalInfo"===n.step),e.xp6(1),e.Q6J("ngIf","credentials"===n.step),e.xp6(1),e.Q6J("ngIf","securityQuestions"===n.step))},dependencies:[m.sg,m.O5,l.rH,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.sg,i.u],styles:['.config-container[_ngcontent-%COMP%]{background-color:#403f3c;min-height:100vh}.card[_ngcontent-%COMP%]{background-color:#7f7e7d;padding:30px}h1[_ngcontent-%COMP%]{color:#fff09a;margin-bottom:1%}h2[_ngcontent-%COMP%]{color:#fff09a;padding-top:20px;padding-bottom:20px;text-align:center}form[_ngcontent-%COMP%]{text-align:left;font-size:24px}label[_ngcontent-%COMP%]{margin-bottom:1%;color:#fff}input[_ngcontent-%COMP%]{margin-bottom:10%;font-size:20px}.button-register[_ngcontent-%COMP%]{font-weight:600;font-size:30px;background-color:#eeba35;font-family:Teko,sans-serif}.button-back[_ngcontent-%COMP%]{text-align:center;font-weight:600;font-size:30px;font-family:Teko,sans-serif}.stepper-wrapper[_ngcontent-%COMP%]{margin-top:auto;display:flex;justify-content:space-between;margin-bottom:20px}.stepper-wrapper[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:space-between;margin-bottom:20px;max-width:800px}.stepper-item[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;flex:1}@media (max-width: 768px){.stepper-item[_ngcontent-%COMP%]{font-size:12px}}.stepper-item[_ngcontent-%COMP%]:before{position:absolute;content:"";border-bottom:10px solid #ccc;width:100%;top:15px;left:-50%;z-index:2}.stepper-item[_ngcontent-%COMP%]:after{position:absolute;content:"";border-bottom:10px solid #ccc;width:100%;top:15px;left:50%;z-index:2}.stepper-item[_ngcontent-%COMP%]   .step-counter[_ngcontent-%COMP%]{position:relative;z-index:5;display:flex;justify-content:center;align-items:center;width:35px;height:35px;border-radius:50%;background:#ccc;margin-bottom:6px}.stepper-item.completed[_ngcontent-%COMP%]   .step-counter[_ngcontent-%COMP%], .stepper-item.done[_ngcontent-%COMP%]   .step-counter[_ngcontent-%COMP%]{background-color:#eeba35}.stepper-item.stepper-item.completed[_ngcontent-%COMP%]:after{position:absolute;content:"";border-bottom:10px solid #EEBA35;width:100%;top:15px;left:50%;z-index:3}.stepper-item[_ngcontent-%COMP%]:first-child:before{content:none}.stepper-item[_ngcontent-%COMP%]:last-child:after{content:none}.step-name[_ngcontent-%COMP%]{color:#f9fff0;font-size:22px;text-align:center;font-weight:600;font-family:Teko,sans-serif}.center-form[_ngcontent-%COMP%]{padding-top:20px;margin-left:15%;margin-right:15%}.answer-input[_ngcontent-%COMP%]{margin-bottom:20%}.nav-link[_ngcontent-%COMP%]{color:#fff;font-size:18px;text-decoration:underline}']}),s})(),title:"register"},{path:"forgot-password",component:(()=>{var t;class s{constructor(o,n,a){this.securityService=o,this.router=n,this.fb=a,this.isLoading=!1,this.verifyEmailForm=this.fb.group({email:[null,i.kI.compose([i.kI.required,i.kI.email])]}),this.errorMessage=""}verifyEmail(){const o=this.verifyEmailForm.controls.email.value;this.securityService.verifyUser(o).subscribe({next:n=>{console.log(n),this.router.navigate(["/security/verify-security-questions"],{queryParams:{email:o},skipLocationChange:!0}),this.isLoading=!1},error:n=>{console.log("error",n),this.errorMessage=n.message,this.isLoading=!1}})}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(d),e.Y36(l.F0),e.Y36(i.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-verify-email"]],decls:18,vars:2,consts:[[1,"verify-container"],[1,"row","justify-content-center","mt-5","text-center"],[1,"card","col-lg-6","col-md-10","col-sm-11"],[1,"row","justify-content-center",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"col-lg-4"],["for","email"],["id","email","type","email","formControlName","email",1,"form-control"],[1,"row","justify-content-center"],["id","submit","value","submit",1,"col-2","btn","button-register","w-50"],["routerLink","/security/signin",1,"text-underline-hover","text-white"],["role","alert",1,"alert","alert-danger","font"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3,"Forgot Password"),e.qZA(),e.TgZ(4,"div",2)(5,"form",3),e.NdJ("ngSubmit",function(){return n.verifyEmail()}),e.YNc(6,N,3,1,"div",4),e.TgZ(7,"h3"),e._uU(8,"Please Verify your email below. "),e.qZA(),e.TgZ(9,"div",5)(10,"label",6),e._uU(11,"Email:"),e.qZA(),e._UZ(12,"input",7),e.qZA(),e.TgZ(13,"div",8)(14,"button",9),e._uU(15,"SUBMIT"),e.qZA()()()(),e.TgZ(16,"a",10),e._uU(17,"Return"),e.qZA()()()),2&o&&(e.xp6(5),e.Q6J("formGroup",n.verifyEmailForm),e.xp6(1),e.Q6J("ngIf",n.errorMessage))},dependencies:[m.O5,l.rH,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:[".verify-container[_ngcontent-%COMP%]{background-color:#403f3c;min-height:800vh}.card[_ngcontent-%COMP%]{background-color:#7f7e7d;padding:30px;margin-top:2%}h1[_ngcontent-%COMP%]{color:#fff09a;margin-bottom:1%}h3[_ngcontent-%COMP%]{text-align:center;color:#fffde3;padding-bottom:20px}form[_ngcontent-%COMP%]{text-align:left;font-size:24px}label[_ngcontent-%COMP%]{margin-bottom:1%;color:#fff}input[_ngcontent-%COMP%]{margin-bottom:10%;font-size:20px}.button-register[_ngcontent-%COMP%]{font-weight:600;font-size:30px;background-color:#eeba35;font-family:Teko,sans-serif}"]}),s})()},{path:"verify-security-questions",component:(()=>{var t;class s{constructor(o,n,a,c){this.route=o,this.router=n,this.securityService=a,this.fb=c,this.sqForm=this.fb.group({answer1:[null,i.kI.compose([i.kI.required])],answer2:[null,i.kI.compose([i.kI.required])],answer3:[null,i.kI.compose([i.kI.required])]}),this.selectedSecurityQuestions=[],this.question1="",this.question2="",this.question3="",this.errorMessage="",this.isLoadingLabels=!0,this.isLoadingSubmit=!1,this.email=this.route.snapshot.queryParamMap.get("email")??"",this.email||this.router.navigate(["/forgot-password"])}ngOnInit(){this.securityService.findsecurityQuestions(this.email).subscribe({next:o=>{this.selectedSecurityQuestions=o.selectedSecurityQuestions,console.log("data:",this.selectedSecurityQuestions)},error:o=>{404!==o.status?(this.errorMessage=" there was a problem verifying your security questions",this.isLoadingLabels=!1):(this.errorMessage="No security Questions are associated with this email! Please contact the help desk at ITsupport@bcrs.com")||(this.errorMessage="email address you entered was not found")},complete:()=>{this.question1=this.selectedSecurityQuestions[0].questionText,this.question2=this.selectedSecurityQuestions[1].questionText,this.question3=this.selectedSecurityQuestions[2].questionText,this.isLoadingLabels=!1}})}verifySecurityQuestions(){this.isLoadingSubmit=!0;let o=[{questionText:this.question1,answerText:this.sqForm.controls.answer1.value},{questionText:this.question2,answerText:this.sqForm.controls.answer2.value},{questionText:this.question3,answerText:this.sqForm.controls.answer3.value}];console.log(o),this.securityService.verifysecurityQuestions(this.email,o).subscribe({next:n=>{this.router.navigate(["security/password-reset"],{queryParams:{email:this.email},skipLocationChange:!0})},error:n=>{n.error.message?this.errorMessage=n.error.message:(this.errorMessage="There was a problem verifying your security questions. Please try again",this.isLoadingSubmit=!1)},complete:()=>{this.isLoadingSubmit=!1}})}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(l.gz),e.Y36(l.F0),e.Y36(d),e.Y36(i.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-verify-security-questions"]],decls:32,vars:14,consts:[[1,"verify-container"],[1,"row","justify-content-center","mt-5"],[1,"col-lg-8","col-md-10"],[1,"card","shadow","p-4"],[1,"form","row","g-3",3,"formGroup","ngSubmit"],["class","row text-align",4,"ngIf"],[1,"mb-3","form-group"],[1,"row"],[1,"col-md-12"],["class","spinner-border","role","status",4,"ngIf"],["for","q1","class","form-label",4,"ngIf"],["type","text","formControlName","answer1",1,"form-control","w-75"],["class","alert alert-danger mt-2",4,"ngIf"],["for","q2","class","form-label",4,"ngIf"],["type","text","formControlName","answer2",1,"form-control","w-75"],["for","q3","class","form-label",4,"ngIf"],["type","text","formControlName","answer3",1,"form-control","w-75"],["type","submit","id","submit",1,"btn","button-register","mx-auto","d-block","w-50",3,"disabled"],[4,"ngIf"],["routerLink","/security/signin",1,"text-underline-hover","text-white"],[1,"row","text-align"],[1,"col-12"],[1,"alert","alert-danger","w-50","mx-auto"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["for","q1",1,"form-label"],[1,"alert","alert-danger","mt-2"],["for","q2",1,"form-label"],["for","q3",1,"form-label"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return n.verifySecurityQuestions()}),e.YNc(5,F,4,1,"div",5),e.TgZ(6,"fieldset",6)(7,"legend"),e._uU(8,"Security Questions"),e.qZA(),e.TgZ(9,"div",7)(10,"div",8),e.YNc(11,Q,3,0,"div",9),e.YNc(12,J,2,1,"label",10),e._UZ(13,"input",11),e.YNc(14,Y,2,1,"div",12),e.qZA()(),e.TgZ(15,"div",7)(16,"div",8),e.YNc(17,R,3,0,"div",9),e.YNc(18,z,2,1,"label",13),e._UZ(19,"input",14),e.YNc(20,V,2,1,"div",12),e.qZA()(),e.TgZ(21,"div",7)(22,"div",8),e.YNc(23,j,3,0,"div",9),e.YNc(24,$,2,1,"label",15),e._UZ(25,"input",16),e.YNc(26,B,2,1,"div",12),e.qZA()()(),e.TgZ(27,"button",17),e.YNc(28,H,2,0,"span",18),e.YNc(29,X,3,0,"div",18),e.qZA()()(),e.TgZ(30,"a",19),e._uU(31,"Return"),e.qZA()()()()),2&o&&(e.xp6(4),e.Q6J("formGroup",n.sqForm),e.xp6(1),e.Q6J("ngIf",n.errorMessage),e.xp6(6),e.Q6J("ngIf",n.isLoadingLabels),e.xp6(1),e.Q6J("ngIf",!n.isLoadingLabels),e.xp6(2),e.Q6J("ngIf",n.sqForm.controls.answer1.invalid&&(n.sqForm.controls.answer1.dirty||n.sqForm.controls.answer1.touched)),e.xp6(3),e.Q6J("ngIf",n.isLoadingLabels),e.xp6(1),e.Q6J("ngIf",!n.isLoadingLabels),e.xp6(2),e.Q6J("ngIf",n.sqForm.controls.answer2.invalid&&(n.sqForm.controls.answer2.dirty||n.sqForm.controls.answer2.touched)),e.xp6(3),e.Q6J("ngIf",n.isLoadingLabels),e.xp6(1),e.Q6J("ngIf",!n.isLoadingLabels),e.xp6(2),e.Q6J("ngIf",n.sqForm.controls.answer3.invalid&&(n.sqForm.controls.answer3.dirty||n.sqForm.controls.answer3.touched)),e.xp6(1),e.Q6J("disabled",!n.sqForm.valid),e.xp6(1),e.Q6J("ngIf",!n.isLoadingSubmit),e.xp6(1),e.Q6J("ngIf",n.isLoadingSubmit))},dependencies:[m.O5,l.rH,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:[".verify-container[_ngcontent-%COMP%]{background-color:#403f3c;min-height:800vh}.card[_ngcontent-%COMP%]{background-color:#7f7e7d;padding:30px;margin-top:2%}legend[_ngcontent-%COMP%]{text-align:center;color:#fffde3;padding-bottom:20px;font-size:30px;font-weight:600}form[_ngcontent-%COMP%]{text-align:left;font-size:24px}label[_ngcontent-%COMP%]{margin-bottom:1%;color:#fff;font-size:24px}input[_ngcontent-%COMP%]{margin-bottom:5%;font-size:20px}.button-register[_ngcontent-%COMP%]{font-weight:600;font-size:30px;background-color:#eeba35;font-family:Teko,sans-serif;margin-bottom:30px}label[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{margin-left:12%;margin-right:12%}"]}),s})()},{path:"password-reset",component:(()=>{var t;class s{constructor(o,n,a,c){this.fb=o,this.securityService=n,this.route=a,this.router=c,this.isLoading=!1,this.passwordResetForm=this.fb.group({password:[null,i.kI.compose([i.kI.required,i.kI.pattern("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$")])],confirmPassword:[null,i.kI.compose([i.kI.required,i.kI.pattern("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$")])]}),this.email=this.route.snapshot.queryParamMap.get("email")??"",this.errorMessage="",this.email||(console.log("No email address found"),this.router.navigate(["/"]))}passwordReset(){const o=this.passwordResetForm.controls.password.value,n=this.passwordResetForm.controls.confirmPassword.value;if(console.log("Password has been successfully reset!"),o!==n)return this.errorMessage="Passwords do not match, please try again",this.isLoading=!1,void this.hideAlert();this.securityService.resetPassword(this.email,{password:o}).subscribe({next:c=>{console.log(c),this.router.navigate(["/security/signin"]),this.isLoading=!1},error:c=>{console.log("error",c),this.errorMessage=c.message,this.isLoading=!1}})}hideAlert(){setTimeout(()=>{this.errorMessage=""},5e3)}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(i.qu),e.Y36(d),e.Y36(l.gz),e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-password-reset"]],decls:24,vars:2,consts:[[1,"verify-container"],[1,"row","justify-content-center","mt-5","text-center"],[1,"card","col-lg-6","col-md-10","col-sm-11"],[1,"row","justify-content-center",3,"formGroup","ngSubmit"],[4,"ngIf"],[1,"row","justify-content-center"],[1,"col-lg-4"],["for","password"],["id","password","type","password","formControlName","password","autocomplete","off",1,"form-control"],["for","confirmPassword"],["id","confirmPassword","type","password","formControlName","confirmPassword",1,"form-control"],["id","submit","value","submit",1,"col-2","btn","button-register","w-50"],["routerLink","/security/signin",1,"text-underline-hover","text-white"],["role","alert",1,"alert","alert-danger","font"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3,"Reset Password"),e.qZA(),e.TgZ(4,"div",2)(5,"form",3),e.NdJ("ngSubmit",function(){return n.passwordReset()}),e.YNc(6,W,3,1,"div",4),e.TgZ(7,"h3"),e._uU(8,"Please enter your new password"),e.qZA(),e.TgZ(9,"div",5)(10,"div",6)(11,"label",7),e._uU(12,"New Password:"),e.qZA(),e._UZ(13,"input",8),e.qZA()(),e.TgZ(14,"div",5)(15,"div",6)(16,"label",9),e._uU(17,"Confirm New Password:"),e.qZA(),e._UZ(18,"input",10),e.qZA()(),e.TgZ(19,"div",5)(20,"button",11),e._uU(21,"SUBMIT"),e.qZA()()()(),e.TgZ(22,"a",12),e._uU(23,"Return"),e.qZA()()()),2&o&&(e.xp6(5),e.Q6J("formGroup",n.passwordResetForm),e.xp6(1),e.Q6J("ngIf",n.errorMessage))},dependencies:[m.O5,l.rH,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:[".verify-container[_ngcontent-%COMP%]{background-color:#403f3c;min-height:800vh}.card[_ngcontent-%COMP%]{background-color:#7f7e7d;padding:30px;margin-top:2%}h1[_ngcontent-%COMP%]{color:#fff09a;margin-bottom:1%}h3[_ngcontent-%COMP%]{text-align:center;color:#fffde3;padding-bottom:20px}form[_ngcontent-%COMP%]{text-align:left;font-size:24px}label[_ngcontent-%COMP%]{margin-bottom:1%;color:#fff}input[_ngcontent-%COMP%]{margin-bottom:10%;font-size:20px}.button-register[_ngcontent-%COMP%]{font-weight:600;font-size:30px;background-color:#eeba35;font-family:Teko,sans-serif}"]}),s})()}]}];let ee=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(D),l.Bz]}),s})(),te=(()=>{var t;class s{}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,ee,l.Bz,i.u5,i.UX,p.JF]}),s})()}}]);